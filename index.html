```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wizarding Meal Planner ‚Äî Hogwarts Feast Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Crimson+Text:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{margin:0;background:#f8f4e6;color:#1a1a1a;font-family:'Crimson Text',serif;}
    header{padding:20px;text-align:center;background:linear-gradient(135deg,#7f0909,#d4af37);color:#fff;}
    h1{font-family:'Cinzel',serif;margin:0;font-weight:900}
    main{max-width:1100px;margin:20px auto;padding:0 16px 140px;display:grid;gap:16px;grid-template-columns:1fr .8fr}
    .card{background:#fff;border-radius:14px;box-shadow:0 6px 18px rgba(0,0,0,.15);padding:16px;margin-bottom:16px}
    .meal{border:2px solid #d4af37;border-radius:12px;padding:12px;background:#faf8ef}
    .food{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;border-radius:8px;margin-bottom:4px}
    .food:hover{background:#fdf5d4}
    .loglist{list-style:none;padding:0;margin:0}
    .logitem{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;border:1px dashed #ccc;border-radius:8px;margin-bottom:6px;background:#fffef9}
    .btn{padding:6px 10px;border:none;border-radius:8px;cursor:pointer;background:#0d6217;color:#fff;font-weight:700;margin-left:4px}
    .meter{height:16px;background:#eee;border-radius:999px;overflow:hidden;margin:6px 0}
    .meter>div{height:100%;width:0;background:linear-gradient(90deg,#0d6217,#eee117,#7f0909);transition:width .25s}
    .good{color:#0d6217;font-weight:700}
    .bad{color:#7f0909;font-weight:700}
    .toast{position:fixed;right:12px;bottom:80px;background:#111;color:#fff;padding:8px 12px;border-radius:8px;opacity:0;transition:.3s}
    .toast.show{opacity:1}
    .prize-list{list-style:none;padding:0;}
    .prize-item{margin-bottom:8px;}
  </style>
</head>
<body>
  <header>
    <h1>Wizarding Meal Planner ‚ö°</h1>
    <div>IBS‚ÄëFriendly ‚Ä¢ Dairy‚ÄëFree ‚Ä¢ No Onion/Garlic ‚Ä¢ No Walnuts or Shellfish</div>
    <p>Log your magical meals, earn house points, and redeem enchanted prizes! Stay within 1800-2200 calories for a perfect potion of health.</p>
  </header>
  <main>
    <section>
      <div class="card">
        <h2>Quick Conjure Item ü™Ñ</h2>
        <p>Type what you ate (e.g., "grilled chicken" or "banana"), and we'll divine the calories!</p>
        <input id="quick-name" placeholder="What did you feast on? e.g. banana, grilled chicken" style="width:100%; margin-bottom:8px;" />
        <input id="quick-cal" placeholder="Calories (optional, leave for estimate)" type="number" style="width:100%; margin-bottom:8px;" />
        <button id="quick-estimate" class="btn">Divine Calories</button>
        <button id="quick-add" class="btn">Accio to Log!</button>
      </div>
      <div class="card">
        <h2>Meals at Hogwarts</h2>
        <div id="meals"></div>
      </div>
      <div class="card">
        <h2>Today's Enchanted Log</h2>
        <ul id="log" class="loglist"></ul>
      </div>
    </section>
    <aside>
      <div class="card">
        <h2>Daily Magic Meter</h2>
        <div class="meter"><div id="bar"></div></div>
        <p>Total: <b id="total">0</b> Calories ‚Ä¢ <span id="count">0</span> items</p>
        <p id="status"></p>
      </div>
      <div class="card">
        <h2>Hogwarts House Cup</h2>
        <p>Your House: <b id="house"></b></p>
        <p>House Points: <b id="points">0</b></p>
        <button id="claim" class="btn">Claim Daily Elixir Bonus</button>
        <button id="reset" class="btn">New Day Incantation</button>
      </div>
      <div class="card">
        <h2>Prize Cauldron üèÜ</h2>
        <p>Redeem your points for magical artifacts!</p>
        <ul id="prizes" class="prize-list"></ul>
      </div>
      <div class="card">
        <h2>Wizard's Guide</h2>
        <p>Welcome to the Great Hall of Feasting! Choose your house, log your meals by selecting from suggestions or conjuring custom items. Earn points for logging, bonus for balanced days. Redeem prizes when you have enough points. Avoid forbidden allergens!</p>
      </div>
    </aside>
  </main>
  <footer style="text-align:center;padding:10px;background:#fff8e6;border-top:3px solid #2e2a23;position:fixed;bottom:0;width:100%">
    Hogwarts Feast Game: Log spells (meals) to earn points, balance your calories like a potion (1800-2200), and claim victories for your house!
  </footer>  <template id="meal-template">
    <div class="meal">
      <h3></h3>
      <div class="foods"></div>
      <input class="name" placeholder="Custom feast item, e.g. quinoa salad" />
      <input class="cal" placeholder="Calories (leave blank to divine)" type="number" />
      <button class="btn estimate">Divine Calories ü™Ñ</button>
      <button class="btn add">Conjure Item</button>
      <button class="btn apply">Feast on Selected</button>
    </div>
  </template>  <template id="food-template">
    <div class="food">
      <label><input type="checkbox"><span class="title"></span></label>
      <span class="cal"></span>
    </div>
  </template>
  <div id="toast" class="toast"></div>
  <script>
    const TARGET_MIN=1800,TARGET_MAX=2200;
    const KEY='hp_meal_planner_game';
    const STARTER={Breakfast:[{t:'Overnight oats (almond milk)',c:380},{t:'Eggs + spinach on GF toast',c:420}],Snack1:[{t:'Rice cakes + peanut butter',c:240}],Lunch:[{t:'Grilled chicken + quinoa',c:600}],Snack2:[{t:'Protein shake (DF)',c:280}],Dinner:[{t:'Roast chicken + potatoes',c:720}]};
    const MEALS=['Breakfast','Snack1','Lunch','Snack2','Dinner'];
    const HOUSES=['Gryffindor','Hufflepuff','Ravenclaw','Slytherin'];
    const HOUSE_COLORS={Gryffindor:'#7f0909',Hufflepuff:'#d4af37',Ravenclaw:'#0a1172',Slytherin:'#0d6217'};
    const HOUSE_EMOJIS={Gryffindor:'ü¶Å',Hufflepuff:'ü¶°',Ravenclaw:'ü¶Ö',Slytherin:'üêç'};
    const PRIZES = [
      {name: 'Butterbeer Mug Badge', points: 100, emoji: 'üç∫'},
      {name: 'Quidditch Broom Sticker', points: 200, emoji: 'üßπ'},
      {name: 'Invisibility Cloak Emoji', points: 500, emoji: 'üß•'},
      {name: 'House Cup Trophy Icon', points: 1000, emoji: 'üèÜ'},
      {name: 'Golden Snitch Keychain', points: 2000, emoji: 'üèê'}
    ];
    const CAL_DB = {
      'banana': 105,
      'blueberries': 40,
      'strawberries': 50,
      'orange': 62,
      'kiwi': 42,
      'pineapple': 82,
      'carrot': 50,
      'cucumber': 45,
      'green beans': 31,
      'lettuce': 5,
      'potato': 160,
      'spinach': 7,
      'tomato': 25,
      'zucchini': 20,
      'chicken': 200,
      'beef': 250,
      'pork': 220,
      'fish': 150,
      'tofu': 70,
      'tempeh': 200,
      'egg': 70,
      'rice': 200,
      'quinoa': 222,
      'oats': 150,
      'almond milk': 30,
      'rice milk': 120,
      'peanut butter': 90,
      'peanuts': 160,
      'almonds': 160,
      'macadamia': 200,
      'pecans': 200,
      'pine nuts': 190,
      'bok choy': 13,
      'eggplant': 25,
      'ginger': 80,
      'olives': 115,
      'parsnips': 75,
      'turnip': 28,
      'cantaloupe': 34,
      'grapefruit': 42,
      'honeydew': 36,
      'lemon': 29,
      'lime': 30,
      'corn flour': 361,
      'broccoli': 55, // per cup
      'beef': 250,
      'salmon': 206,
      'tuna': 132,
      'turkey': 189,
      'lamb': 294,
      'avocado': 160 // per 100g, but note limited in FODMAP
    };
    const els={meals:document.getElementById('meals'),mealTpl:document.getElementById('meal-template'),foodTpl:document.getElementById('food-template'),log:document.getElementById('log'),total:document.getElementById('total'),count:document.getElementById('count'),bar:document.getElementById('bar'),status:document.getElementById('status'),toast:document.getElementById('toast'),house:document.getElementById('house'),points:document.getElementById('points'),claim:document.getElementById('claim'),reset:document.getElementById('reset'),prizes:document.getElementById('prizes'),quickName:document.getElementById('quick-name'),quickCal:document.getElementById('quick-cal'),quickEstimate:document.getElementById('quick-estimate'),quickAdd:document.getElementById('quick-add')};
    const today = new Date().toISOString().slice(0,10);
    function allergenBlocked(name){return /(walnut|shrimp|prawn|lobster|crab|shellfish|onion|garlic)/i.test(name);}

function estimateCalories(name){name = name.toLowerCase();let maxMatch = 0; let bestCal = 120;for(let key in CAL_DB){const matchLen = name.includes(key) ? key.length : 0;if(matchLen > maxMatch){maxMatch = matchLen; bestCal = CAL_DB[key];}}return bestCal;}

function toast(msg){els.toast.textContent=msg;els.toast.classList.add('show');setTimeout(()=>els.toast.classList.remove('show'),2500);}

function getHouse(){return localStorage.getItem(KEY+'_house');}
function setHouse(h){localStorage.setItem(KEY+'_house',h);updateHeader();}
function updateHeader(){const h=getHouse();if(h){document.querySelector('header').style.background=`linear-gradient(135deg,${HOUSE_COLORS[h]},#333)`;document.querySelector('header h1').innerHTML=`Wizarding Meal Planner ‚ö° ${HOUSE_EMOJIS[h]}`;els.house.textContent=h;}}

function getPoints(){return +localStorage.getItem(KEY+'_points') || 0;}
function addPoints(p){setPoints(getPoints()+p);}
function setPoints(p){localStorage.setItem(KEY+'_points',p);els.points.textContent=p;renderPrizes();}

function getLastClaim(){return localStorage.getItem(KEY+'_last_claim');}
function setLastClaim(d){localStorage.setItem(KEY+'_last_claim',d);}
function canClaim(){return getLastClaim() !== today;}

function build(){els.meals.innerHTML='';if(!getHouse()){let h=prompt('Choose your Hogwarts House, young wizard: Gryffindor, Hufflepuff, Ravenclaw, Slytherin').trim();while(!HOUSES.map(x=>x.toLowerCase()).includes(h.toLowerCase())){h=prompt('Invalid house! Choose again: Gryffindor, Hufflepuff, Ravenclaw, Slytherin').trim();}setHouse(HOUSES.find(x=>x.toLowerCase()===h.toLowerCase()));}updateHeader();setPoints(getPoints());MEALS.forEach(m=>{const node=els.mealTpl.content.cloneNode(true);node.querySelector('h3').textContent=m;const foods=node.querySelector('.foods');(STARTER[m]||[]).forEach(it=>foods.appendChild(makeFood(m,it.t,it.c)));node.querySelector('.add').onclick=()=>{const n=node.querySelector('.name').value.trim();const c=+node.querySelector('.cal').value;if(!n){toast('Enter item name, apprentice!');return;}if(allergenBlocked(n)){toast('Blocked by protective charm! Forbidden ingredient detected.');return;}const val=c||estimateCalories(n);foods.appendChild(makeFood(m,n,val,true));node.querySelector('.name').value='';node.querySelector('.cal').value='';};node.querySelector('.estimate').onclick=()=>{const n=node.querySelector('.name').value.trim();if(!n){toast('Enter item name, apprentice!');return;}const est=estimateCalories(n);node.querySelector('.cal').value=est;toast(`Calories divined: ${est} ü™Ñ`);};node.querySelector('.apply').onclick=()=>{const cbs=[...foods.querySelectorAll('input:checked')];cbs.forEach(cb=>{addToLog({meal:m,title:cb.dataset.title,cal:+cb.dataset.cal});cb.checked=false;});};els.meals.appendChild(node);});renderLog();update();renderPrizes();els.quickEstimate.onclick=()=>{const n=els.quickName.value.trim();if(!n){toast('Enter what you ate, wizard!');return;}const est=estimateCalories(n);els.quickCal.value=est;toast(`Calories divined: ${est} ü™Ñ`);};els.quickAdd.onclick=()=>{const n=els.quickName.value.trim();const c=+els.quickCal.value;if(!n){toast('Enter what you ate, wizard!');return;}if(allergenBlocked(n)){toast('Blocked by protective charm!');return;}const val=c||estimateCalories(n);addToLog({meal:'Custom',title:n,cal:val});els.quickName.value='';els.quickCal.value='';toast('Item accio\'d to log! +10 points üèÜ');};}

function makeFood(meal,title,cal){const n=els.foodTpl.content.cloneNode(true);const row=n.querySelector('.food');const cb=row.querySelector('input');cb.dataset.meal=meal;cb.dataset.title=title;cb.dataset.cal=cal;row.querySelector('.title').textContent=title;row.querySelector('.cal').textContent=cal+' cal';return n;}

function getLog(){return JSON.parse(localStorage.getItem(KEY+'_log')||'[]');}
function setLog(log){localStorage.setItem(KEY+'_log',JSON.stringify(log));renderLog();update();}
function addToLog(item){const log=getLog();log.push(item);setLog(log);addPoints(10);}
function removeFromLog(i){const log=getLog();log.splice(i,1);setLog(log);addPoints(-10);toast('Item evanesco\'d... -10 points üòî');}

function renderLog(){const log=getLog();els.log.innerHTML='';log.forEach((x,i)=>{const li=document.createElement('li');li.className='logitem';li.innerHTML=`${x.title} <b>${x.cal} cal</b>`;const b=document.createElement('button');b.textContent='‚úñ';b.className='btn';b.onclick=()=>removeFromLog(i);li.appendChild(b);els.log.appendChild(li);});}

function update(){const log=getLog();const total=log.reduce((a,b)=>a+b.cal,0);els.total.textContent=total;els.count.textContent=log.length;els.bar.style.width=Math.min(100,total/3000*100)+'%';if(total<TARGET_MIN)els.status.innerHTML='‚ö†Ô∏è Too low - Add more magic to your feast!';else if(total>TARGET_MAX)els.status.innerHTML='‚ö†Ô∏è Too high - Overpowered spell!';else els.status.innerHTML='‚úÖ Perfect potion!';els.status.className=(total>=TARGET_MIN&&total<=TARGET_MAX)?'good':'bad';els.claim.disabled=!(total>=TARGET_MIN&&total<=TARGET_MAX&&log.length>=5&&canClaim());}

function renderPrizes(){const pts = getPoints();els.prizes.innerHTML='';PRIZES.forEach((p, i) => {const li = document.createElement('li');li.className='prize-item';li.innerHTML = `${p.emoji} ${p.name} - ${p.points} points`;if(pts >= p.points){const btn = document.createElement('button');btn.textContent='Redeem!';btn.className='btn';btn.onclick=()=>{if(pts >= p.points){addPoints(-p.points);toast(`Redeemed ${p.name}! Expecto Prize! ‚ú®`);}else{toast('Not enough points, gather more!');}};li.appendChild(btn);}els.prizes.appendChild(li);});}

els.claim.onclick=()=>{const log=getLog();const total=log.reduce((a,b)=>a+b.cal,0);if(total>=TARGET_MIN&&total<=TARGET_MAX&&log.length>=5&&canClaim()){addPoints(50);setLastClaim(today);toast('50 points to '+getHouse()+'! Wingardium Leviosa! ‚ú®');update();}else{toast('Not ready yet, padawan! Complete a full day\'s log in range with at least 5 items.');}};

els.reset.onclick=()=>{if(confirm('Reset log for a new day? Points preserved like a Horcrux!')){setLog([]);toast('New dawn at Hogwarts!');}};

build();

  </script>
</body>
</html>
```
